var DAYS=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],LOCAL_STORAGE_KEY_NAME="5f6e898b-9338-49d9-b1da-84e2609bae9d-chores",LOCAL_STORAGE_OLD_KEY_NAME="chores",DEFAULT_CHORES={chores:[{title:"Cook dinner",days:[0,1,2,3,4,5,6]},{title:"Dishes",days:[0,1,2,3,4,5,6]},{title:"Laundry",days:[6]},{title:"Meal prep",days:[0]},{title:"Put trash out",days:[3]},{title:"Call mom",days:[5]},{title:"Vacuum",days:[2]},{title:"Mop",days:[4]}],reminders:[{title:"Buy milk",snoozedUntil:null}],version:"2020-09-05",currentChoreStatus:null,currentDay:null,settings:{confetti:!0}};function getData(){if(null===(e=JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY_NAME)))&&(console.log("Checking old name"),e=JSON.parse(localStorage.getItem(LOCAL_STORAGE_OLD_KEY_NAME))),null!==e)return void 0===e.version?e=upgradeLegacy(e):"2020-09-05"===e.version?e=minorUpgrades(e):console.log("Unknown version!"),e;console.log("No chores, loading defaults");var e=DEFAULT_CHORES;new Date;return e.currentDay=(new Date).getDay(),loadChoresForDay(e)}function minorUpgrades(e){return void 0===e.settings&&(e.settings={}),void 0===e.settings.confetti&&(e.settings.confetti=!0),void 0===e.reminders&&(e.reminders=[]),saveData(e),e}function upgradeLegacy(e){return e.version="2020-09-05",saveData(e),localStorage.removeItem(LOCAL_STORAGE_OLD_KEY_NAME),e}function saveData(e){localStorage.setItem(LOCAL_STORAGE_KEY_NAME,JSON.stringify(e))}function loadChoresForDay(e){e.currentChoreStatus=[];var t,n,r=e.currentDay;for(t in e.chores){var a=e.chores[t];a.days.includes(r)&&e.currentChoreStatus.push({title:a.title,isDone:!1})}for(n in e.reminders){var i=e.reminders[n];i.snoozedUntil==e.currentDay&&(i.snoozedUntil=null)}return saveData(e),e}function createReminderTitleElm(e,t){var n=document.createElement("div");n.classList.add("box");var r=document.createElement("h2");n.appendChild(r),r.innerText=e.title,r.classList.add("title"),r.classList.add("is-3");var a=document.createElement("div");n.appendChild(a),a.classList.add("mt-4");r=document.createElement("button");a.appendChild(r),r.innerText="Rename",r.classList.add("button"),r.classList.add("is-outlined"),r.classList.add("m-2"),r.addEventListener("click",generateRenameReminder(t));r=document.createElement("button");a.appendChild(r),r.classList.add("button"),r.classList.add("is-danger"),r.classList.add("m-2"),r.innerHTML="&#128473;",r.addEventListener("click",generateRemoveReminder(t));r=document.createElement("p");n.appendChild(r),r.innerText="Next occurance: ",r.classList.add("mt-2"),r.classList.add("is-vcentered");r=document.createElement("button");return n.appendChild(r),r.classList.add("button"),r.classList.add("m-2"),r.classList.add("is-vcentered"),null===e.snoozedUntil?r.innerText="Today":r.innerText=DAYS[e.snoozedUntil],r.addEventListener("click",generateSnoozeReminder(t)),n}function showReminders(){for(var e=document.querySelector("#reminder");e.firstChild;)e.removeChild(e.lastChild);var t,n=getData();for(t in n.reminders){var r=createReminderTitleElm(n.reminders[t],t);e.appendChild(r)}}function generateRemoveReminder(t){return function(){var e=getData();e.reminders.splice(t,1),saveData(e),showReminders()}}function generateSnoozeReminder(n){return function(){var e=getData(),t=e.reminders[n];null===t.snoozedUntil?t.snoozedUntil=(e.currentDay+1)%7:(t.snoozedUntil=(t.snoozedUntil+1)%7,t.snoozedUntil==e.currentDay&&(t.snoozedUntil=null)),saveData(e),showReminders()}}function generateRenameReminder(n){return function(){var e=getData(),t=e.reminders[n].title,t=prompt("Edit reminder",t);null!=t&&(e.reminders[n].title=t,saveData(e),showReminders())}}function connectButtons(){document.querySelector("#addReminder").addEventListener("click",function(){var e,t=prompt("What do you need to remember?","Doctors appointment");null!=t&&((e=getData()).reminders.push({title:t,snoozedUntil:null}),saveData(e),showReminders())}),document.querySelector("#done").addEventListener("click",function(){window.location="./"})}window.onload=function(){connectButtons(),showReminders()};
//# sourceMappingURL=remind.js.map