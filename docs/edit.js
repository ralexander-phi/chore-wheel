var DAYS=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],LOCAL_STORAGE_KEY_NAME="5f6e898b-9338-49d9-b1da-84e2609bae9d-chores",LOCAL_STORAGE_OLD_KEY_NAME="chores",DEFAULT_CHORES={chores:[{title:"Cook dinner",days:[0,1,2,3,4,5,6]},{title:"Dishes",days:[0,1,2,3,4,5,6]},{title:"Laundry",days:[6]},{title:"Meal prep",days:[0]},{title:"Put trash out",days:[3]},{title:"Call mom",days:[5]},{title:"Vacuum",days:[2]},{title:"Mop",days:[4]}],version:"2020-09-05",currentChoreStatus:null,currentDay:null,settings:{confetti:!0}};function getChores(){if(null===(chores=JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY_NAME)))&&(console.log("Checking old name"),chores=JSON.parse(localStorage.getItem(LOCAL_STORAGE_OLD_KEY_NAME))),null!==chores)return void 0===chores.version?chores=upgradeLegacy(chores):"2020-09-05"===chores.version||console.log("Unknown version!"),chores;console.log("No chores, loading defaults"),chores=DEFAULT_CHORES;new Date;return chores.currentDay=(new Date).getDay(),loadChoresForDay(chores)}function upgradeLegacy(e){return e.version="2020-09-05",saveChores(e),localStorage.removeItem(LOCAL_STORAGE_OLD_KEY_NAME),e}function saveChores(e){localStorage.setItem(LOCAL_STORAGE_KEY_NAME,JSON.stringify(e))}function loadChoresForDay(e){e.currentChoreStatus=[];var o=e.currentDay;for(var t in e.chores){var r=e.chores[t];r.days.includes(o)&&e.currentChoreStatus.push({title:r.title,isDone:!1})}return saveChores(e),e}var chores=null;function loadSettings(){var e=document.querySelector("#confetti");void 0===chores.settings&&(chores.settings={}),void 0===chores.settings.confetti&&(chores.settings.confetti=!0),e.checked=Boolean(chores.settings.confetti)}function showDays(e,o){var t=chores.chores[e];for(var r in DAYS){var s=DAYS[r],n=document.createElement("div");n.classList.add("dayOfWeek"),t.days.includes(Number(r))&&n.classList.add("active"),n.addEventListener("click",generateToggleDay(e,r)),n.innerHTML=s,o.appendChild(n)}}function showChoreTitle(e,o){var t=chores.chores[e],r=document.createElement("div");r.classList.add("choreTitleLine");var s=document.createElement("div");s.classList.add("choreTitle"),s.innerHTML=t.title,r.appendChild(s);var n=document.createElement("div");n.innerHTML="remove",n.classList.add("textButton"),n.classList.add("removeText"),n.addEventListener("click",generateRemoveChore(e)),r.appendChild(n);var a=document.createElement("div");a.innerHTML="rename",a.classList.add("textButton"),a.classList.add("renameText"),a.addEventListener("click",generateRenameChore(e)),r.appendChild(a),o.appendChild(r)}function showChore(e,o){chores.chores[e];var t=document.createElement("div");t.classList.add("choreSchedule"),showChoreTitle(e,t),showDays(e,t),o.appendChild(t)}function showChores(){for(var e=document.querySelector("#editList");e.firstChild;)e.removeChild(e.lastChild);for(var o in chores.chores)showChore(o,e)}function generateRemoveChore(e){return function(){chores.chores.splice(e,1),saveChores(chores),showChores()}}function generateRenameChore(t){return function(){var e=chores.chores[t].title,o=prompt("Rename chore",e);chores.chores[t].title=o,saveChores(chores),showChores()}}function generateToggleDay(t,r){return r=Number(r),function(){var e=chores.chores[t];if(e.days.includes(r)){for(var o in e.days)if(e.days[o]==r){e.days.splice(o,1);break}}else e.days.push(r);saveChores(chores),showChores()}}function connectButtons(){var e=document.querySelector("#confetti");document.querySelector("#addChore").addEventListener("click",function(){var e=prompt("What task do you need to add?","Water plants");chores.chores.push({title:e,days:[0,1,2,3,4,5,6]}),saveChores(chores),showChores()}),document.querySelector("#done").addEventListener("click",function(){saveChores(chores),window.location="./#reload"}),e.addEventListener("click",function(){chores.settings.confetti=e.checked,saveChores(chores)})}window.onload=function(){connectButtons(),chores=getChores(),loadSettings(),showChores()};
//# sourceMappingURL=edit.js.map